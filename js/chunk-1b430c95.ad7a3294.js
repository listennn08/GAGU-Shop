(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b430c95"],{"626d":function(t,s,i){"use strict";var a=i("c640"),e=i.n(a);e.a},c640:function(t,s,i){},d2f1:function(t,s,i){"use strict";i.r(s);var a=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("section",{staticClass:"section is-paddingless"},[i("div",{staticClass:"container mt-1"},[i("div",{staticClass:"columns is-desktop"},[i("div",{staticClass:"column is-full"},[t.tempProduct?i("div",{staticClass:"box is-shadowless"},[i("div",{staticClass:"columns"},[i("span",{staticClass:"tag is-primary is-fixed is-uppercase"},[t._v(t._s(t.tempProduct.category))]),i("div",{staticClass:"colum is-img-centered"},[i("div",{staticClass:"crad-image"},[i("figure",{staticClass:"image"},[i("img",{attrs:{src:t.tempProduct.imageUrl[0]}})])])]),i("div",{staticClass:"column has-text-left"},[i("h4",{staticClass:"title is-4"},[t._v(t._s(t.tempProduct.title)),t.tempProduct.store<5?i("span",{staticClass:"ml-2 tag is-danger"},[t._v("HOT")]):t._e()]),i("div",{staticClass:"tag content-tag is-light mb-1"},[t._v("產品說明")]),i("section",{staticClass:"description mb-3"},[i("p",{staticClass:"is-marginless",domProps:{innerHTML:t._s(t.descriptionDisplay(t.tempProduct.content))}})]),i("div",{staticClass:"tag content-tag is-light mb-1"},[t._v("產品資訊")]),i("section",{staticClass:"content mb-3"},[i("p",{staticClass:"is-marginless",domProps:{innerHTML:t._s(t.descriptionDisplay(t.tempProduct.description))}})]),i("div",{staticClass:"tag content-tag is-light mb-1"},[t._v("售價")]),i("div",{staticClass:"price is-size-5 has-text-weight-bold mb-3"},[t._v(t._s(t._f("cash")(t.tempProduct.price))),i("span",{staticClass:"is-size-6",class:{strike:t.tempProduct.price}},[t._v(t._s(t._f("cash")(t.tempProduct.origin_price)))])]),i("div",{staticClass:"tag content-tag is-light mb-1"},[t._v("庫存")]),i("p",{staticClass:"mb-3"},[t._v(t._s(t.tempProduct.options.store)+" "+t._s(t.tempProduct.unit))]),i("div",{staticClass:"card-foot"},[i("div",{staticClass:"field has-addons has-addons-lefted mt-1"},[i("div",{staticClass:"control"},[i("button",{staticClass:"button is-left",attrs:{disabled:t.quantityMinest},on:{click:function(s){return t.countQuantity("m")}}},[t._v("−")])]),i("div",{staticClass:"control"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.quantity,expression:"tempProduct.quantity"}],staticClass:"input has-text-centered",attrs:{type:"number"},domProps:{value:t.tempProduct.quantity},on:{change:function(s){return t.updateCartData()},input:function(s){s.target.composing||t.$set(t.tempProduct,"quantity",s.target.value)}}})]),i("div",{staticClass:"control"},[i("button",{staticClass:"button is-right",on:{click:function(s){return t.countQuantity("p")}}},[t._v("+")])]),i("button",{staticClass:"button is-primary addCart mx-2 is-fullwidth",class:{"is-loading":t.isLoading},attrs:{disabled:t.tempProduct.options.store<1},on:{click:function(s){return t.addToCart(t.tempProduct.id,t.tempProduct.quantity)}}},[t._v("加入購物車")])])])])])]):t._e()]),i("div",{staticClass:"column"},[i("button",{staticClass:"button is-text is-pulled-left",on:{click:function(s){return s.preventDefault(),t.$router.push("/products")}}},[t._v("« 上一頁")])])]),i("div",{staticClass:"columns"},[t.tempProduct.category?i("div",{staticClass:"column"},[i("RandomRecommend",{attrs:{title:"相關商品",titleSide:"has-text-left",type:t.tempProduct.category,id:t.tempProduct.id}})],1):t._e()]),i("div",{staticClass:"box is-shadowless mt-1"},[i("div",{staticClass:"subtitle is-4 is-clearfix has-text-weight-bold has-text-left"},[t._v("商品評論")]),i("div",{staticClass:"columns is-multiline is-desktop"},t._l(t.tempProduct.options.feeback,(function(s){return i("div",{key:s.id,staticClass:"column is-half-desktop"},[i("div",{staticClass:"box"},[i("article",{staticClass:"media"},[i("div",{staticClass:"media-left"},[i("figure",{staticClass:"image is-64x64"},[i("img",{attrs:{src:s.pic}})])]),i("div",{staticClass:"media-content"},[i("div",{staticClass:"comment-content"},[i("p",{staticClass:"has-text-left"},[i("strong",{staticClass:"is-size-5 mr-2"},[t._v(t._s(s.id))]),t._l(5,(function(a){return i("span",{key:a,staticClass:"star desktop",class:t.fill(a,s.star)},[t._v("★")])}))],2),i("p",{staticClass:"has-text-left is-marginless mobile"},t._l(5,(function(a){return i("span",{key:a,staticClass:"star",class:t.fill(a,s.star)},[t._v("★")])})),0),i("span",{staticClass:"has-text-left comment"},[t._v(t._s(s.comment))]),i("p")])])])])])})),0)])])])},e=[],c=(i("99af"),i("ac1f"),i("5319"),i("5530")),n=i("2f62"),o=i("d58c"),r=i("2bd0"),d={name:"Product",components:{RandomRecommend:r["a"]},data:function(){return{isLoading:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(n["c"])({tempProduct:"product/tempProduct",loading:"loading"})),{},{quantityMinest:function(){return 1===this.tempProduct.quantity},descriptionDisplay:function(){return function(t){return t?t.replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"):""}},fill:function(){return function(t,s){return t<=s?"fill":""}}}),created:function(){this.getProduct()},watch:{"$route.params":{handler:function(){this.$route.params!==this.tempProduct.id&&this.getProduct()}}},methods:Object(c["a"])(Object(c["a"])({},Object(n["b"])({setMsg:"setMsg",setTempProduct:"product/setTempProduct",clearTempProduct:"product/clearTempProduct",toggleLoading:"toggleLoading"})),{},{getProduct:function(){var t=this,s=this.$loading.show({opacity:1}),i=this.$route.params.id;Object(o["h"])(i).then((function(i){var a=i.data.data;a.options=JSON.parse(a.options),t.setTempProduct(Object(c["a"])(Object(c["a"])({},a),{},{quantity:1})),s.hide()}))},countQuantity:function(t){var s=this.tempProduct.options.store;"m"===t?this.tempProduct.quantity>1&&(this.tempProduct.quantity-=1):"p"===t&&(this.tempProduct.quantity+1<=s?this.tempProduct.quantity+=1:this.setMsg({type:!1,msg:"商品只剩下 ".concat(s," ").concat(this.tempProduct.unit)}))},updateCartData:function(){var t=this.tempProduct.options.store;this.tempProduct.quantity<1?this.tempProduct.quantity=1:this.tempProduct.quantity>t&&(this.tempProduct.quantity=t,this.setMsg({type:!1,msg:"商品只剩下 ".concat(t," ").concat(this.tempProduct.unit)}))},addToCart:function(t,s){var i=this;this.isLoading=!0;var a=this.tempProduct.options.store;if(t&&s>0){if(s>a)return void this.setMsg({type:!1,msg:"下單數量超過商品庫存數量！"});Object(o["a"])(t,s).then((function(){i.setMsg({msg:"已加入購物車",type:!0}),i.isLoading=!1})).catch((function(t){i.setMsg({msg:t.response.data.errors[0],type:!1}),i.isLoading=!1}))}}}),beforeDestroy:function(){this.clearTempProduct()}},u=d,l=(i("626d"),i("2877")),p=Object(l["a"])(u,a,e,!1,null,"598513b7",null);s["default"]=p.exports}}]);
//# sourceMappingURL=chunk-1b430c95.ad7a3294.js.map