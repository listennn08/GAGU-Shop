(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6dae48c"],{"0bae":function(t,e,s){"use strict";var a=s("eb89"),i=s.n(a);i.a},"13d5":function(t,e,s){"use strict";var a=s("23e7"),i=s("d58f").left,n=s("a640"),c=s("ae40"),r=n("reduce"),o=c("reduce",{1:0});a({target:"Array",proto:!0,forced:!r||!o},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},8647:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("Cart")},i=[],n=s("5530"),c=s("2f62"),r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"section is-paddingless"},[t.shopcartItems.length>0?s("div",{staticClass:"container"},[s("div",{staticClass:"action"},[s("button",{ref:"removeAllContainer",staticClass:"button is-light my-2",on:{click:function(e){return t.deleteCartData()}}},[t._v("刪除所有商品")])]),s("table",{staticClass:"table is-fullwidth desktop"},[t._m(0),s("tbody",{ref:"preivew"},t._l(t.shopcartItems,(function(e,a){return s("tr",{key:e.product.id},[s("td",{staticClass:"is-vcentered",attrs:{scoped:"row"}},[t._v(t._s(a+1))]),s("td",{staticClass:"is-cus-centered"},[s("figure",{staticClass:"image is-128x128"},[s("img",{attrs:{src:e.product.imageUrl[0]}})])]),s("td",{staticClass:"is-vcentered"},[s("div",{staticClass:"item-name"},[t._v(t._s(t._f("hideTitle")(e.product.title)))])]),s("td",{staticClass:"is-vcentered"},[e.product.price?s("div",{staticClass:"price has-text-centered"},[t._v(t._s(t._f("cash")(e.product.price))),s("span",{class:{strike:e.product.price}},[t._v(t._s(t._f("cash")(e.product.origin_price)))])]):t._e()]),s("td",{staticClass:"is-vcentered"},[s("div",{staticClass:"field has-addons has-addons-centered"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-left is-small",attrs:{disabled:t.quantityMinest(a)},on:{click:function(e){return t.countQuantity(a,"m")}}},[t._v("−")])]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],staticClass:"input has-text-centered is-small",attrs:{type:"number"},domProps:{value:e.quantity},on:{change:function(e){return t.updateCartData(a)},input:function(s){s.target.composing||t.$set(e,"quantity",s.target.value)}}})]),s("div",{staticClass:"control"},[s("button",{staticClass:"button is-right is-small",on:{click:function(e){return t.countQuantity(a,"p")}}},[t._v("+")])])])]),s("td",{staticClass:"item-total is-vcentered"},[t._v(t._s(t._f("cash")(t.itemTotal(a))))]),s("td",{staticClass:"is-vcentered"},[s("button",{staticClass:"button is-text is-underlineless remove",class:{"is-loading":e.removing},on:{click:function(e){return t.deleteCartData(a)}}},[t._v("×")])])])})),0),s("tr",{staticClass:"total"},[s("td",[t._v("小計")]),s("td",{attrs:{colspan:"4"}}),s("td",[t._v(t._s(t._f("cash")(t.countAll)))]),s("td")])]),s("div",{staticClass:"mobile mb-2"},[t._l(t.shopcartItems,(function(e,a){return s("div",{key:e.product.id,staticClass:"box is-shadowless"},[s("div",{staticClass:"media"},[s("div",{staticClass:"media-left"},[s("figure",{staticClass:"image is-64x64"},[s("img",{attrs:{src:e.product.imageUrl[0]}})])]),s("div",{staticClass:"content has-text-left"},[s("button",{staticClass:"button is-text is-underlineless remove is-pulled-right",class:{"is-loading":e.removing},on:{click:function(e){return t.deleteCartData(a)}}},[t._v("×")]),s("p",{staticClass:"item-name is-sizs-6"},[t._v(t._s(e.product.title))]),e.product.price?s("div",{staticClass:"price has-text-righted"},[t._v(t._s(t._f("cash")(e.product.price)))]):t._e(),s("div",{staticClass:"field has-addons has-addons-centered"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-left is-small",attrs:{disabled:t.quantityMinest(a)},on:{click:function(e){return t.countQuantity(a,"m")}}},[t._v("−")])]),s("div",{staticClass:"control"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.quantity,expression:"item.quantity"}],staticClass:"input has-text-centered is-small",attrs:{type:"number"},domProps:{value:e.quantity},on:{change:function(e){return t.updateCartData(a)},input:function(s){s.target.composing||t.$set(e,"quantity",s.target.value)}}})]),s("div",{staticClass:"control"},[s("button",{staticClass:"button is-right is-small",on:{click:function(e){return t.countQuantity(a,"p")}}},[t._v("+")])])])])])])})),s("div",{staticClass:"total"},[t._v("小計: "+t._s(t._f("cash")(t.countAll)))])],2),s("div",{staticClass:"shopcart-checkout buttons is-fullwidth is-right-desktop is-center-mobile"},[s("button",{staticClass:"button is-light continueshop",on:{click:function(e){return t.$router.push("products")}}},[t._v("‹‹ 繼續購物")]),s("button",{staticClass:"button is-primary checkout",on:{click:function(e){return t.$router.push("checkout")}}},[t._v("去結帳 ››")])])]):s("div",{staticClass:"container"},[s("NoCart")],1),s("div",{staticClass:"container"},[s("RandomRecommend",{attrs:{title:"精選推薦",type:"all"}})],1)])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("編號")]),s("th",[t._v("圖示")]),s("th",[t._v("產品名稱")]),s("th",[t._v("售價")]),s("th",[t._v("購買數量")]),s("th",[t._v("總價")]),s("th",[t._v("移除")])])])}],u=(s("d81d"),s("13d5"),s("2909")),l=s("d58c"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"noItemAlert"},[t._v("還沒有把喜愛的商品加入購物車唷 趕快去購物吧！")]),s("button",{staticClass:"button is-primary",on:{click:function(e){return t.$router.push("products")}}},[t._v("‹‹繼續購物")])])},p=[],h=s("2bd0"),m={name:"NoCart",components:{RandomRecommend:h["a"]}},v=m,f=(s("8aef"),s("2877")),C=Object(f["a"])(v,d,p,!1,null,"ee8d4bd2",null),b=C.exports,_={name:"Cart",components:{NoCart:b,RandomRecommend:h["a"]},created:function(){this.getShopCartData()},computed:Object(n["a"])(Object(n["a"])({},Object(c["c"])({shopcartItems:"shopcart/shopcartItems"})),{},{countAll:function(){return this.shopcartItems.reduce((function(t,e){return t+e.quantity*(e.product.price?e.product.price:e.product.origin_price)}),0)},itemTotal:function(){var t=this;return function(e){return t.shopcartItems[e].quantity*(t.shopcartItems[e].product.price?t.shopcartItems[e].product.price:t.shopcartItems[e].product.origin_price)}},quantityMinest:function(){var t=this;return function(e){return 1===t.shopcartItems[e].quantity}}}),methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])({setShopcartItems:"shopcart/setShopcartItems",deleteItem:"shopcart/deleteItem",deleteAllItem:"shopcart/deleteAllItem"})),{},{getShopCartData:function(){var t=this,e=this.$loading.show();Object(l["g"])().then((function(s){t.setShopcartItems(Object(u["a"])(s.data.data).map((function(t){var e=t;return e.removing=!1,e}))),e.hide()}))},countQuantity:function(t,e){"m"===e?this.shopcartItems[t].quantity>1&&(this.shopcartItems[t].quantity-=1):"p"===e&&(this.shopcartItems[t].quantity+=1),this.updateCartData(t)},updateCartData:function(t){var e=this.shopcartItems[t];this.shopcartItems[t].quantity<1&&(this.shopcartItems[t].quantity=1),e!==this.shopcartItems[t].quantity&&Object(l["k"])(this.shopcartItems[t].product.id,this.shopcartItems[t].quantity)},deleteCartData:function(t){var e=this;if(t||0===t)this.shopcartItems[t].removing=!0,Object(l["d"])(this.shopcartItems[t].product.id).then((function(){e.deleteItem(t)}));else{var s=this.$loading.show({container:this.$refs.removeAllContainer,isFullPage:!1});Object(l["d"])().then((function(){e.deleteAllItem(),s.hide()}))}}})},g=_,y=(s("89df"),Object(f["a"])(g,r,o,!1,null,"346d80cf",null)),I=y.exports,k={name:"Shopcart",components:{Cart:I},computed:Object(n["a"])({},Object(c["c"])({shopcartItems:"shopcart/shopcartItems"}))},q=k,w=(s("0bae"),Object(f["a"])(q,a,i,!1,null,"52ee517e",null));e["default"]=w.exports},"89df":function(t,e,s){"use strict";var a=s("e289"),i=s.n(a);i.a},"8aef":function(t,e,s){"use strict";var a=s("946d"),i=s.n(a);i.a},"946d":function(t,e,s){},d58f:function(t,e,s){var a=s("1c0b"),i=s("7b0b"),n=s("44ad"),c=s("50c4"),r=function(t){return function(e,s,r,o){a(s);var u=i(e),l=n(u),d=c(u.length),p=t?d-1:0,h=t?-1:1;if(r<2)while(1){if(p in l){o=l[p],p+=h;break}if(p+=h,t?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:d>p;p+=h)p in l&&(o=s(o,l[p],p,u));return o}};t.exports={left:r(!1),right:r(!0)}},e289:function(t,e,s){},eb89:function(t,e,s){}}]);
//# sourceMappingURL=chunk-d6dae48c.402dc46d.js.map