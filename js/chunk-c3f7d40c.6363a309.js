(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c3f7d40c"],{"03af":function(t,s,e){},1175:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("section",[e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container"},[e("div",{staticClass:"columns is-centered"},[e("div",{staticClass:"column is-two-thirds"},[e("Order")],1)])])])])},n=[],i=e("c77f"),r={name:"Payment",components:{Order:i["a"]}},o=r,c=e("2877"),d=Object(c["a"])(o,a,n,!1,null,"1f5a1c8a",null);s["default"]=d.exports},c77f:function(t,s,e){"use strict";var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"order"},[e("h4",{staticClass:"h4t has-text-left"},[e("font-awesome-icon",{staticClass:"icon is-small",attrs:{icon:["far","clipboard"]}}),e("span",[t._v(" 購物清單")])],1),e("div",{staticClass:"list",class:{hide:!t.isCollapse}},t._l(t.order.products,(function(s){return e("div",{key:s.product.id,staticClass:"columns is-marginless has-text-centered is-vcentered"},[e("div",{staticClass:"column is-paddingless is-marginless is-3 mobile"},[e("div",{staticClass:"box is-shadowless py-1 px-2"},[e("div",{staticClass:"media"},[e("div",{staticClass:"media-left"},[e("figure",{staticClass:"image is-64x64 is-inline-block mr-1"},[e("img",{attrs:{src:s.product.imageUrl[0]}})])]),e("div",{staticClass:"content"},[e("div",{staticClass:"is-5 has-text-weight-bold"},[t._v(t._s(s.product.title))]),e("p",{staticClass:"is-marginless"},[t._v("x"+t._s(s.quantity))]),e("p",{staticClass:"is-marginless"},[t._v(t._s(t._f("cash")(s.product.price)))])])])])]),e("div",{staticClass:"column desktop"},[e("figure",{staticClass:"image is-128x128"},[e("img",{attrs:{src:s.product.imageUrl[0]}})])]),e("div",{staticClass:"column desktop"},[t._v(t._s(s.product.title))]),e("div",{staticClass:"column desktop"},[t._v("x"+t._s(s.quantity))]),e("div",{staticClass:"column desktop"},[t._v(t._s(t._f("cash")(s.product.price)))])])})),0),t.showCollapseButton?e("div",{staticClass:"columns is-marginless collapse is-centered"},[e("div",{staticClass:"column is-full"},[e("button",{staticClass:"collapse__btn",class:t.collapseIcon,on:{click:function(s){return t.toggleCollapse()}}},[e("font-awesome-icon",{attrs:{icon:["fas",t.isCollapse?"angle-double-up":"angle-double-down"]}})],1)])]):t._e(),e("h4",{staticClass:"h4t has-text-left"},[e("font-awesome-icon",{staticClass:"titleIcon",attrs:{icon:["fas","info-circle"]}}),t._v(" 訂單資訊")],1),t.order.user?e("table",{staticClass:"table is-fullwidth"},[e("tr",[e("td",[t._v("姓名")]),e("td",[t._v(t._s(t.order.user.name))])]),e("tr",[e("td",[t._v("電話")]),e("td",[t._v(t._s(t.order.user.tel))])]),e("tr",[e("td",[t._v("信箱")]),e("td",[t._v(t._s(t.order.user.email))])]),e("tr",[e("td",[t._v("地址")]),e("td",[t._v(t._s(t.order.user.address))])]),e("tr",[e("td",[t._v("付款方式")]),e("td",[t._v(t._s(t.order.payment))])]),e("tr",[e("td",[t._v("付款狀態")]),e("td",{staticClass:"has-text-weight-bold",class:t.paidStatus.status},[t._v(t._s(t.paidStatus.msg))])])]):t._e(),t.order.paid?t._e():e("button",{staticClass:"button is-primary",class:{"is-loading":t.loading},on:{click:function(s){return t.doPay(t.order.id)}}},[t._v("確認付款")])])},n=[],i=e("5530"),r=e("2f62"),o=e("d58c"),c={data:function(){return{isCollapse:!1}},created:function(){var t=this,s=this.$loading.show(),e=this.$route.params.id;Object(o["i"])(e).then((function(e){t.setOrder(e.data.data),t.setCurrentStep(t.order.paid?3:2),s.hide()}))},computed:Object(i["a"])(Object(i["a"])({},Object(r["c"])({order:"order/order",loading:"loading"})),{},{collapseIcon:function(){return this.isCollapse?"up":"down"},showCollapseButton:function(){return!!this.order.products&&this.order.products.length>2},paidStatus:function(){return this.order.paid?{status:"has-text-success",msg:"已付款"}:{status:"has-text-danger",msg:"未付款"}}}),methods:Object(i["a"])(Object(i["a"])({},Object(r["b"])({setMsg:"setMsg",setOrder:"order/setOrder",toggleLoading:"toggleLoading",setCurrentStep:"setCurrentStep"})),{},{toggleCollapse:function(){this.isCollapse=!this.isCollapse},doPay:function(t){var s=this;this.toggleLoading(),Object(o["j"])(t).then((function(t){s.setOrder(t.data.data),s.toggleLoading(),s.setMsg({msg:"付款完成！",type:!0}),s.setCurrentStep(3),s.$router.push("/paysuccess/".concat(t.data.data.id))})).catch((function(){s.toggleLoading(),s.setMsg({msg:"付款失敗！",type:!1})}))}})},d=c,u=(e("f2b6"),e("2877")),l=Object(u["a"])(d,a,n,!1,null,"fd3fa77c",null);s["a"]=l.exports},d58c:function(t,s,e){"use strict";e.d(s,"f",(function(){return c})),e.d(s,"h",(function(){return d})),e.d(s,"g",(function(){return u})),e.d(s,"a",(function(){return l})),e.d(s,"k",(function(){return p})),e.d(s,"d",(function(){return f})),e.d(s,"b",(function(){return g})),e.d(s,"c",(function(){return h})),e.d(s,"e",(function(){return v})),e.d(s,"i",(function(){return m})),e.d(s,"j",(function(){return C}));var a=e("5530"),n=e("bc3a"),i=e.n(n),r="dd62b88f-6f23-42a4-8551-b1cb4552bb3e",o=i.a.create({timeout:3e4,baseURL:"https://course-ec-api.hexschool.io/api/".concat(r,"/ec/")}),c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.get("products?page=".concat(t))},d=function(t){return o.get("product/".concat(t))},u=function(){return o.get("shopping")},l=function(t,s){return o.post("shopping",{product:t,quantity:s})},p=function(t,s){return o.patch("shopping",{product:t,quantity:s})},f=function(t){return t?o.delete("shopping/".concat(t)):o.delete("shopping/all/product")},g=function(t){return o.post("coupon/search",{code:t})},h=function(t){return o.post("orders",Object(a["a"])({},t))},v=function(){return o.get("orders")},m=function(t){return o.get("orders/".concat(t))},C=function(t){return o.post("orders/".concat(t,"/paying"))}},f2b6:function(t,s,e){"use strict";var a=e("03af"),n=e.n(a);n.a}}]);
//# sourceMappingURL=chunk-c3f7d40c.6363a309.js.map