(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a8eb94da"],{"131f":function(t,a,s){t.exports=s.p+"img/wardrobe.e2fd651e.svg"},1799:function(t,a,s){"use strict";var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("nav",{staticClass:"pagination is-centered",attrs:{role:"navigation","aria-label":"pagination"}},[s("ul",{staticClass:"pagination-list"},[s("li",[s("a",{staticClass:"pagination-previous",attrs:{id:"prev",href:"#",disabled:t.firstPage},on:{click:function(a){return a.preventDefault(),t.changePage("m")}}},[t._v("«")])]),t._l(t.pagination.total_pages,(function(a){return s("li",{key:a,on:{click:function(s){return t.goToPage(a)}}},[s("a",{staticClass:"pagination-link",class:{"is-current":t.cur(a)}},[t._v(t._s(a))])])})),s("li",[s("a",{staticClass:"pagination-next",attrs:{id:"next",href:"#",disabled:t.lastPage},on:{click:function(a){return a.preventDefault(),t.changePage("p")}}},[t._v("»")])])],2)])},e=[],n={name:"Pagination",props:{pagination:Object},computed:{cur:function(){var t=this;return function(a){return a===t.pagination.current_page}},firstPage:function(){return 1===this.pagination.current_page},lastPage:function(){return this.pagination.current_page===this.pagination.total_pages}},methods:{changePage:function(t){var a=this.pagination.current_page,s=this.pagination.total_pages;"p"===t?a<s&&this.$emit("update:pagination",this.pagination.current_page+=1):"m"===t&&a>1&&this.$emit("update:pagination",this.pagination.current_page-=1)},goToPage:function(t){this.$emit("update:pagination",this.pagination.current_page=t)}}},c=n,o=s("2877"),r=Object(o["a"])(c,i,e,!1,null,null,null);a["a"]=r.exports},"3c4b":function(t,a,s){t.exports=s.p+"img/shelving.b55795a0.svg"},"460c":function(t,a,s){},"47fc":function(t,a,s){"use strict";var i=s("460c"),e=s.n(i);e.a},"4a34":function(t,a,s){"use strict";var i=s("9bcb"),e=s.n(i);e.a},"4a7c":function(t,a,s){t.exports=s.p+"img/window.2f38ab08.svg"},"8b2e":function(t,a,s){t.exports=s.p+"img/bar.64f9b58d.svg"},"968a":function(t,a,s){t.exports=s.p+"img/cupboard.8188b79c.svg"},"9bcb":function(t,a,s){},c910:function(t,a,s){t.exports=s.p+"img/lamp.c396acdc.svg"},d58c:function(t,a,s){"use strict";s.d(a,"f",(function(){return r})),s.d(a,"h",(function(){return l})),s.d(a,"g",(function(){return u})),s.d(a,"a",(function(){return p})),s.d(a,"k",(function(){return d})),s.d(a,"d",(function(){return g})),s.d(a,"b",(function(){return f})),s.d(a,"c",(function(){return h})),s.d(a,"e",(function(){return v})),s.d(a,"i",(function(){return m})),s.d(a,"j",(function(){return b}));var i=s("5530"),e=s("bc3a"),n=s.n(e),c="dd62b88f-6f23-42a4-8551-b1cb4552bb3e",o=n.a.create({timeout:3e4,baseURL:"https://course-ec-api.hexschool.io/api/".concat(c,"/ec/")}),r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return o.get("products?page=".concat(t))},l=function(t){return o.get("product/".concat(t))},u=function(){return o.get("shopping")},p=function(t,a){return o.post("shopping",{product:t,quantity:a})},d=function(t,a){return o.patch("shopping",{product:t,quantity:a})},g=function(t){return t?o.delete("shopping/".concat(t)):o.delete("shopping/all/product")},f=function(t){return o.post("coupon/search",{code:t})},h=function(t){return o.post("orders",Object(i["a"])({},t))},v=function(){return o.get("orders")},m=function(t){return o.get("orders/".concat(t))},b=function(t){return o.post("orders/".concat(t,"/paying"))}},d81d:function(t,a,s){"use strict";var i=s("23e7"),e=s("b727").map,n=s("1dde"),c=s("ae40"),o=n("map"),r=c("map");i({target:"Array",proto:!0,forced:!o||!r},{map:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}})},e6dc:function(t,a,s){"use strict";s.r(a);var i=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("article",{staticClass:"container is-fullheight"},[s("CategoryList"),s("ProductList")],1)},e=[],n=s("5530"),c=s("2f62"),o=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("section",[i("div",{staticClass:"tabs is-info is-toggle is-fullwidth my-3 mx-3 desktop"},[i("ul",{staticClass:"is-info"},[i("li",{staticClass:"main-menu"},[i("a",{class:t.active(""),attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCategory("")}}},[t._v("全部商品")])]),i("li",[i("a",{class:t.active("curtain"),attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCategory("curtain")}}},[t._v("窗簾")])]),i("li",[i("a",{class:t.active("bed"),attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCategory("bed")}}},[t._v("床架")])]),i("li",[i("a",{class:t.active("chair"),attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCategory("chair")}}},[t._v("椅子")])]),i("li",[i("a",{class:t.active("sofa"),attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCategory("sofa")}}},[t._v("沙發")])]),i("li",[i("a",{class:t.active("lamp"),attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCategory("lamp")}}},[t._v("檯燈")])]),i("li",[i("a",{class:t.active("bookcase"),attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCategory("bookcase")}}},[t._v("書櫃")])]),i("li",[i("a",{class:t.active("wardrobe"),attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCategory("wardrobe")}}},[t._v("衣櫃")])]),i("li",[i("a",{class:t.active("cabinet"),attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCategory("cabinet")}}},[t._v("電視櫃")])]),i("li",[i("a",{class:t.active("table"),attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.setCategory("table")}}},[t._v("吧台桌")])])])]),i("div",{staticClass:"menu has-background-light mobile"},[i("ul",{staticClass:"menu-list mx-1",class:{expand:t.expand}},[i("li",{staticClass:"collapse",on:{click:function(a){return t.toggleCollapse()}}},[i("a",{attrs:{href:"#",disabled:""}},[t._v(t._s(t.currentCategory))]),i("button",{on:{click:function(a){return a.stopPropagation(),t.toggleCollapse(a)}}},[i("font-awesome-icon",{attrs:{icon:["fas",t.expand?"angle-up":"angle-down"]}})],1)]),i("li",[i("a",{class:t.active(""),attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.setCategory(""),t.toggleCollapse()}}},[t._v("全部商品")])]),i("li",[i("a",{class:t.active("curtain"),attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.setCategory("curtain"),t.toggleCollapse()}}},[i("div",{staticClass:"item"},[i("span",[t._v("窗簾")]),i("span",{staticClass:"ml-1"},[i("img",{attrs:{src:s("4a7c")}})])])])]),i("li",[i("a",{class:t.active("bed"),attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.setCategory("bed"),t.toggleCollapse()}}},[i("span",[t._v("床架")]),i("span",{staticClass:"ml-1"},[i("font-awesome-icon",{attrs:{icon:["fas","bed"]}})],1)])]),i("li",[i("a",{class:t.active("chair"),attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.setCategory("chair"),t.toggleCollapse()}}},[i("span",[t._v("椅子")]),i("span",{staticClass:"ml-1"},[i("font-awesome-icon",{attrs:{icon:["fas","chair"]}})],1)])]),i("li",[i("a",{class:t.active("sofa"),attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.setCategory("sofa"),t.toggleCollapse()}}},[i("span",[t._v("沙發")]),i("span",{staticClass:"ml-1"},[i("font-awesome-icon",{attrs:{icon:["fas","couch"]}})],1)])]),i("li",[i("a",{class:t.active("lamp"),attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.setCategory("lamp"),t.toggleCollapse()}}},[i("div",{staticClass:"item"},[i("span",[t._v("檯燈")]),i("span",{staticClass:"ml-1"},[i("img",{attrs:{src:s("c910")}})])])])]),i("li",[i("a",{class:t.active("bookcase"),attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.setCategory("bookcase"),t.toggleCollapse()}}},[i("div",{staticClass:"item"},[i("span",[t._v("書櫃")]),i("span",{staticClass:"ml-1"},[i("img",{attrs:{src:s("3c4b")}})])])])]),i("li",[i("a",{class:t.active("wardrobe"),attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.setCategory("wardrobe"),t.toggleCollapse()}}},[i("div",{staticClass:"item"},[i("span",[t._v("衣櫃")]),i("span",{staticClass:"ml-1"},[i("img",{attrs:{src:s("131f")}})])])])]),i("li",[i("a",{class:t.active("cabinet"),attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.setCategory("cabinet"),t.toggleCollapse()}}},[i("div",{staticClass:"item"},[i("span",[t._v("電視櫃")]),i("span",{staticClass:"ml-1"},[i("img",{attrs:{src:s("968a")}})])])])]),i("li",[i("a",{class:t.active("table"),attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.setCategory("table"),t.toggleCollapse()}}},[i("div",{staticClass:"item"},[i("span",[t._v("吧台桌")]),i("span",{staticClass:"ml-1"},[i("img",{attrs:{src:s("8b2e")}})])])])])])])])},r=[],l={name:"ProductCategories",computed:Object(n["a"])(Object(n["a"])({},Object(c["c"])({category:"product/category"})),{},{active:function(){var t=this;return function(a){return t.category===a?"active":""}},currentCategory:function(){return""===this.category?this.categoryList.all:this.categoryList[this.category]}}),data:function(){return{expand:!1,categoryList:{all:"全部商品",bed:"床架",chair:"椅子",lamp:"檯燈",sofa:"沙發",bookcase:"書櫃",cabinet:"電視櫃",wardrobe:"衣櫃",table:"桌子",curtain:"窗簾"}}},methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])({setCategory:"product/setCategory",sticky:"sticky"})),{},{toggleCollapse:function(){this.expand=!this.expand}}),beforeDestroy:function(){this.setCategory("")}},u=l,p=(s("47fc"),s("2877")),d=Object(p["a"])(u,o,r,!1,null,"3c96420e",null),g=d.exports,f=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",{staticClass:"section is-paddingless"},[s("div",{staticClass:"container"},[s("div",{staticClass:"columns is-multiline is-marginless is-variable is-desktop is-centered columns-centered"},t._l(t.products,(function(a,i){return s("div",{key:i,staticClass:"column is-4-fullhd is-5-widescreen is-6-desktop is-10-tablet is-full-mobile",attrs:{"data-id":a.id}},[s("div",{staticClass:"box has-text-left is-rounded",class:{disabled:!a.store},on:{click:function(s){return t.$router.push("/product/"+a.id)}}},[s("div",{staticClass:"card-image columns is-marginless is-cus-centered"},[s("div",{staticClass:"has-background-primary has-text-light is-category"},[t._v(t._s(a.category))]),s("figure",{staticClass:"image is-256x256"},[s("img",{staticClass:"is-rounded",attrs:{src:a.imageUrl[0]}})])]),s("div",{staticClass:"card-content is-paddingless px-2 py-5 mb-auto"},[s("div",{staticClass:"title is-4",attrs:{title:a.title}},[t._v(t._s(a.title))]),s("div",{staticClass:"content is-marginless"},[t._v(t._s(t._f("hideContent")(a.content)))]),s("div",{staticClass:"has-text-right is-marginless"},[s("router-link",{staticClass:"descript-link has-text-weight-bold",attrs:{to:"/product/"+a.id,disabled:!a.store},on:{click:function(t){t.stopPropagation()}}},[t._v("查看更多 »")])],1),s("div",{staticClass:"is-marginless"},[a.price?s("div",{staticClass:"price in-bottom"},[t._v(t._s(t._f("cash")(a.price))),s("span",{class:{strike:a.price}},[t._v(t._s(t._f("cash")(a.origin_price)))])]):t._e()])]),s("div",{staticClass:"card-footer"},[s("div",{staticClass:"columns is-marginless is-paddingless is-mobile"},[s("div",{staticClass:"column is-6-mobile is-paddingless"},[s("div",{staticClass:"field has-addons has-addons-centered mt-1 is-fullwidth"},[s("div",{staticClass:"control"},[s("button",{staticClass:"button is-left",attrs:{disabled:t.quantityLimit(i,"min",a.store)},on:{click:function(a){return a.stopPropagation(),t.countQuantity(i,"m")}}},[t._v("−")])]),s("div",{staticClass:"control is-expanded"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.quantity,expression:"item.quantity"}],staticClass:"input has-text-centered",attrs:{type:"number",disabled:!a.store},domProps:{value:a.quantity},on:{click:function(t){t.stopPropagation()},change:function(s){return t.updateCartData(i,a.store)},input:function(s){s.target.composing||t.$set(a,"quantity",s.target.value)}}})]),s("div",{staticClass:"control"},[s("button",{staticClass:"button is-right",attrs:{disabled:t.quantityLimit(i,"max",a.store)},on:{click:function(a){return a.stopPropagation(),t.countQuantity(i,"p")}}},[t._v("+")])])]),1===a.store?s("div",{staticClass:"column is-paddingless is-marginless"},[s("small",{staticClass:"has-text-danger"},[t._v("熱銷商品！剩最後一組！")])]):t._e()]),s("div",{staticClass:"column is-paddingless"},[s("div",{staticClass:"field has-addons has-addons-centered mt-1 is-fullwidth"},[s("div",{staticClass:"control is-expanded"},[s("button",{staticClass:"button is-primary addCart ml-1 is-fullwidth",class:{"is-loading":a.isLoading},attrs:{disabled:!a.store},on:{click:function(s){return s.stopPropagation(),t.addToCart(i,a.id,a.quantity)}}},[t._v("加入購物車")])])])])])])])])})),0),t.showPagination?[s("Pagination",{attrs:{pagination:t.pagination}})]:t._e(),s("router-link",{staticClass:"shop-cart",attrs:{to:"/shopcart"}},[s("div",{staticClass:"shop-container"},[t.shopcart.quantity?s("div",{staticClass:"cart-count"},[t._v(t._s(t.shopcart.quantity))]):t._e(),s("font-awesome-icon",{attrs:{icon:"shopping-cart"}}),s("div",{staticClass:"txt"},[t._v("購物車")])],1)])],2)])},h=[],v=(s("d81d"),s("2909")),m=s("d58c"),b=s("1799"),C={name:"ProductList",components:{ProductCategories:g,Pagination:b["a"]},data:function(){return{id:null,pageOpen:!1,shopcart:{quantity:null},pagination:{current_page:1}}},created:function(){this.getData(),this.getShopcartQuantity()},watch:{"pagination.current_page":{handler:function(){var t=this,a=this.pagination.current_page,s=this.$loading.show();Object(m["f"])(a).then((function(a){t.setProducts(Object(v["a"])(a.data.data).map((function(t){var a=t;return a.quantity=1,a.isLoading=!1,a}))),s.hide()}))}}},computed:Object(n["a"])(Object(n["a"])({},Object(c["c"])({products:"product/products",category:"product/category"})),{},{showPagination:function(){return this.pagination.current_page&&this.pagination.total_pages>1},quantityLimit:function(){var t=this;return function(a,s,i){return!i||("min"===s?1===t.products[a].quantity:t.products[a].quantity===t.products[a].store)}}}),methods:Object(n["a"])(Object(n["a"])({},Object(c["b"])({setMsg:"setMsg",setProducts:"product/setProducts",setPagination:"setPagination",setTempProduct:"product/setTempProduct",togglePage:"togglePage"})),{},{getData:function(){var t=this,a=this.$loading.show();Object(m["f"])().then((function(s){t.setProducts(Object(v["a"])(s.data.data).map((function(t){var a=t;return a.quantity=1,a.store=parseInt(JSON.parse(a.options).store,10),a.isLoading=!1,a}))),t.pagination=s.data.meta.pagination,a.hide()})).catch((function(){t.setMsg({msg:"載入失敗，請重新載入頁面",type:!1}),a.hide()}))},getShopcartQuantity:function(){var t=this;Object(m["g"])().then((function(a){t.shopcart.quantity=a.data.meta.pagination.total}))},countQuantity:function(t,a){"m"===a?this.products[t].quantity>1&&(this.products[t].quantity-=1):"p"===a&&(this.products[t].quantity+=1)},updateCartData:function(t,a){this.products[t].quantity<1?this.products[t].quantity=1:this.products[t].quantity>a&&(this.products[t].quantity=a)},addToCart:function(t,a,s){var i=this;this.products[t].isLoading=!0,a&&s>0?Object(m["a"])(a,s).then((function(){i.getShopcartQuantity(),i.products[t].isLoading=!1})).catch((function(a){i.setMsg({msg:a.response.data.errors[0],type:!1}),i.products[t].isLoading=!1})):this.products[t].isLoading=!1}})},y=C,_=(s("4a34"),Object(p["a"])(y,f,h,!1,null,"02579a13",null)),k=_.exports,P={name:"Products",components:{CategoryList:g,ProductList:k},data:function(){return{toggle:!0}},computed:Object(n["a"])(Object(n["a"])({},Object(c["c"])(["sticky"])),{},{toggleIcon:function(){return this.toggle?"angle-double-left":"angle-double-right"}}),methods:{toggleCollapse:function(){this.toggle=!this.toggle}}},x=P,w=Object(p["a"])(x,i,e,!1,null,null,null);a["default"]=w.exports}}]);
//# sourceMappingURL=chunk-a8eb94da.94dd6697.js.map